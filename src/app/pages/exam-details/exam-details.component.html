<div class="sidebar">
  <app-instructornavbar [instructorName]="instructorName"></app-instructornavbar>
</div>

<div class="main-content">
  <div class="custom-box">
    <h2>Announcements for Course ID: {{ courseId }}</h2>
    <h4>Instructor: {{ instructorName }}</h4>

    <div *ngIf="announcements.length > 0; else noAnnouncements">
      <div *ngFor="let announcement of announcements" class="announcement-item">
        <p>{{ announcement.announcement_text }}</p>
        <small>Created at: {{ announcement.created_at | date:'medium' }}</small>
      </div>
    </div>

    <ng-template #noAnnouncements>
      <p>No announcements found for this course.</p>
    </ng-template>

    <div class="custom-box1">
      <table class="table table-hover align-middle">
        <tbody>
          <tr *ngFor="let exam of examData?.exams">
            <td>
              <div class="avatar">
                <img [src]="exam.avatar" alt="avatar">
              </div>
            </td>
            <td>
              <div class="name-email">{{ exam.name }}</div>
              <div class="email">{{ exam.email }}</div>
            </td>
            <td>{{ exam.type }}</td>
            <td>{{ exam.time }}</td>
            <td>
              <button class="btn" [routerLink]="['/courseann']">
                <img [src]="exam.actions.search" alt="Search" />
              </button>
              <button class="icon-button" (click)="openPopupp()">
                <img [src]="exam.actions.edit" alt="Edit" class="action-icon" />
              </button>
              <button class="icon-button" (click)="openPopup()">
                <img src="./trash.png" alt="Delete Icon" class="action-icon" />
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-end mt-5 mb-3">
        <a href="upload-note"
          class="btn text-white rounded-3 border-0"
          style="width: 170px; height: 40px; background-color: #243c63; transition: all 0.3s ease;"
          >
          Add New
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Popup Modal: Confirm Delete -->
<div class="custom-modal-overlay" *ngIf="showPopup">
  <div class="custom-modal">
    <button class="close-btn left" (click)="closePopup()">
      <img class="closePopup" src="./closepopup.png" alt="Close" style="width: 30px" />
    </button>
    <h3>Confirm Your Delete</h3>
    <p>Do You Want To Delete?</p>
    <div class="modal-buttons">
      <button class="primary-btn" (click)="confirmAttendance()">Yes, I want to Delete</button>
      <button class="secondary-btn" (click)="closePopup()">Cancel</button>
    </div>
  </div>
</div>

<!-- Popup Modal: Success Delete -->
<div class="custom-modal-overlay" *ngIf="showSuccessPopup">
  <div class="custom-modal">
    <button class="close-btn left" (click)="closeSuccessPopup()">
      <img class="closePopup" src="./closepopup.png" alt="Close" style="width: 30px" />
    </button>
    <h3>Delete successful!</h3>
    <div style="margin-top: 15px;">
      <img src="./success.png" alt="Success" style="width: 60px" />
    </div>
  </div>
</div>

<!-- Popup Modal: Confirm Edit -->
<div class="custom-modal-overlay" *ngIf="showPopupp">
  <div class="custom-modal">
    <button class="close-btn left" (click)="closePopupp()">
      <img class="closePopupp" src="./closepopup.png" alt="Close" style="width: 30px" />
    </button>
    <h3>Confirm Your Edit</h3>
    <p>Do You Want To Edit?</p>
    <div class="modal-buttons">
      <button class="primary-btn" (click)="confirmAttendancee()">Yes, I want to Edit</button>
      <button class="secondary-btn" (click)="closePopupp()">Cancel</button>
    </div>
  </div>
</div>

<!-- Popup Modal: Success Edit -->
<div class="custom-modal-overlay" *ngIf="showSuccessPopupp">
  <div class="custom-modal">
    <button class="close-btn left" (click)="closeSuccessPopupp()">
      <img class="closePopupp" src="./closepopup.png" alt="Close" style="width: 30px" />
    </button>
    <h3>Edit successful!</h3>
    <div style="margin-top: 15px;">
      <img src="./success.png" alt="Success" style="width: 60px" />
    </div>
  </div>
</div>
