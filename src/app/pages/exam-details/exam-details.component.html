<div class="sidebar">
  <app-instructornavbar [instructorName]="instructorName"></app-instructornavbar>
</div>

<div class="main-content" style="font-family: 'Inter', sans-serif; font-size: 14px;">
  <div class="custom-box">
    <div class="icon-text">
      <img src="Icons/profile-add.png" alt="Icon" class="icon-img">
      <span class="course-text">Exam Details</span>
    </div>

    <div class="custom-box1">
      <table class="table table-hover align-middle">
        <tbody>
          <tr *ngFor="let exam of exams">
            <td><img src="Icons/i.png" class="avatar" alt="Avatar"></td>
            <td>{{ exam.announcement_title }}</td>
            <td>{{ exam.type || '' }}</td> <!-- fallback if 'type' not defined -->
            <td>{{ exam.created_at | date: 'short' }}</td>
            <td>
              <button class="btn" [routerLink]="['/courseann', exam.id]">
                <img src="Icons/search-normal.png" alt="Search">
              </button>
              <button class="icon-button" (click)="openEditPopup(exam)">
                <img src="Icons/edit-2.png" alt="Edit" class="action-icon">
              </button>
              <button class="icon-button" (click)="openDeletePopup(exam)">
                <img src="Icons/trash.png" alt="Delete Icon" class="action-icon">
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-end mt-5 mb-3">
        <button 
          class="btn text-white rounded-3 border-0"
          style="width: 170px; height: 40px; background-color: #243c63;"
          (click)="goToUpload()"
          (mouseover)="onButtonHover($event)"
          (mouseout)="onButtonLeave($event)">
          Add New
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Confirmation Modal -->
<div class="custom-modal-overlay" *ngIf="showEditPopup">
  <div class="custom-modal">
    <button class="close-btn" (click)="closePopup()">
      <img src="./closepopup.png" alt="Close" style="width: 30px;">
    </button>
    <h3>Confirm Your Edit</h3>
    <p>Do You Want To Edit?</p>

    


<!-- Announcement Title Edit -->
<div class="form-group">
  <label for="announcementTitle">Announcement Title:</label>
  <input
    id="announcementTitle"
    type="text"
    [(ngModel)]="selectedExam.announcement_title"
    class="form-control"
    placeholder="Edit the announcement title here..."
  />
</div>

 <!-- Announcement Text Edit -->
 <div class="form-group">
  <label for="announcementText">Announcement Text:</label>
  <textarea
    id="announcementText"
    [(ngModel)]="selectedExam.announcement_text"
    rows="5"
    class="form-control"
    placeholder="Edit the announcement text here..."
  ></textarea>
</div>



<div class="modal-buttons">
  <!-- Yes Button triggers confirmEdit() -->
  <button class="primary-btn" (click)="confirmEdit()">Yes, I want to Edit</button>
  <!-- Cancel Button just closes the modal -->
  <button class="secondary-btn" (click)="closePopup()">Cancel</button>
</div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="custom-modal-overlay" *ngIf="showDeletePopup">
  <div class="custom-modal">
    <button class="close-btn" (click)="closePopup()">
      <img src="./closepopup.png" alt="Close" style="width: 30px;">
    </button>
    <h3>Confirm Your Delete</h3>
    <p>Do You Want To Delete?</p>
    <div class="modal-buttons">
      <button class="primary-btn" (click)="confirmDelete()">Yes, I want to Delete</button>
      <button class="secondary-btn" (click)="closePopup()">Cancel</button>
    </div>
  </div>
</div>

<!-- Success Popups -->
<div class="custom-modal-overlay" *ngIf="showEditSuccess">
  <div class="custom-modal">
    <button class="close-btn" (click)="closeSuccessPopup()">
      <img src="./closepopup.png" alt="Close" style="width: 30px;">
    </button>
    <h3>Edit successful!</h3>
    <img src="./success.png" alt="Success" style="width: 60px; margin-top: 15px;">
  </div>
</div>

<div class="custom-modal-overlay" *ngIf="showDeleteSuccess">
  <div class="custom-modal">
    <button class="close-btn" (click)="closeSuccessPopup()">
      <img src="./closepopup.png" alt="Close" style="width: 30px;">
    </button>
    <h3>Delete successful!</h3>
    <img src="./success.png" alt="Success" style="width: 60px; margin-top: 15px;">
  </div>
</div>
